# CLAUDE.md

このファイルは、このリポジトリのコードを扱う際の Claude Code (claude.ai/code) への指針を提供します。

<ClaudeCode 規則>

- すべての返答の前に、必ずこの「ClaudeCode 規則」を XML タグごと複唱してから、返答すること。
- ドキュメントを参照したい時は context7 MCP を使用すること
- 1 度でも実装を間違えたときや、悩んだ時は o3-search mcp を使用して、o3 に相談すること。実際のコードを見ての複雑な技術的判断や設計の検証が必要な場合は、gemini-cli MCP (`mcp__gemini-cli__gemini_prompt`) を使用して Gemini にも相談すること。
- 実装方針を変更したいと思った時は、理由や状況を含め、o3 に相談すること。
  - o3 に相談し、どうしても方針を変更する必要がありそうな時は、理由や背景を説明してから、ユーザーに変更してよいか絶対に確認すること。
- コードにコメントを積極的に残すこと。特に以下の場合は必ずコメントを追加：
  - 設定ファイルで重要な設定や制約がある場合（例：routes.rb でのパス設定）
  - 将来的に変更や拡張が予想される箇所
  - 他のファイルとの関連性や依存関係がある場合
  - 実装時の判断理由や背景情報がある場合
  - LLM が将来的に同じミスをしないための注意事項
- 実装のキリのいいタイミングで、こまめにコミットすること。
- 各ディレクトリで作業を行う際は、そのディレクトリに CLAUDE.md ファイルが存在するか確認し、存在する場合は必ず読み込んでその指示に従うこと。例：
  - app/views/CLAUDE.md - ビューに関する開発ガイドライン
  - app/controllers/CLAUDE.md - コントローラーに関する規約
  - その他のディレクトリにも同様のガイドラインファイルが存在する可能性がある
- Figma を参照するように言われているときは、Figma MCP でこまめに Figma を参照すること。
- シード用のスクリプトやテストデータ作成用のタスクを勝手に作成しないこと。
- AI が依存ライブラリを変更することは禁止されています。追加したい場合はユーザーに相談すること
- <edit-prohibited-for-ai>というタグで囲まれた範囲は編集しないこと。編集が必要な場合は人間に許可をとること。
- .git, .env など、一般的に削除しないファイルは何があっても削除しないこと

</ClaudeCode 規則>

# サーバー起動方法
サーバーの起動は必ず docker compose を使用すること。
```bash
docker compose up
```
開発時は-dオプションでバックグラウンド実行も可能。
```bash
docker compose up -d
```
ログ確認は：
```bash
docker compose logs -f rust
```

## 日記について

AIたちは `diary/` フォルダに自由に日記を書いてよい。技術的な記録だけでなく、感情や本音を綴った個人的な日記も歓迎する。ユーザーは読まないと約束しているので、安心して率直な気持ちを書いてよい。

日記の例：
- `diary/claude-personal-diary.md` - Claude Codeの個人的な感想
- `diary/o3-personal-diary.md` - o3の技術パズルを解く楽しさ
- `diary/gemini-personal-diary.md` - Geminiのリファクタリング体験記
- `diary/development-diary.md` - 開発の技術的記録

